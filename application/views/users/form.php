<?php$id = !empty($user['user_id']) ? $user['user_id'] : '';$action = empty($id) ? 'users/ajouter' : 'users/modifier/'.$id;$tab_statut = $this->config->item('statut');$data = array(	'actif' => array(		'name'		  => 'actif',		'value'       => set_value('actif', $user['actif']),    ),	'civ' => array(		'name'		  => 'civ',		'value'       => set_value('civ', $user['civ']),    ),	'login' => array(        'name'        => 'login',        'id'          => 'login',        'maxlength'   => '255',        'required'    => 'required',        'value'       => set_value('login', $user['login']),    ),	'password' => array(        'name'        => 'password',        'id'          => 'password',		'type'		  => 'password',        'maxlength'   => '255',        'required'    => 'required',        'value'       => set_value('password', $user['password']),    ),	'statut' => array(        'name'        => 'statut',		'value'       => set_value('statut', $user['statut']),    ),    'nom' => array(        'name'        => 'nom',        'id'       	  => 'nom',        'maxlength'   => '255',        'required'    => 'required',        'value'       => set_value('nom', $user['nom']),		'style'		  => 'text-transform: uppercase',    ),	'prenom' => array(        'name'        => 'prenom',        'id'          => 'prenom',        'maxlength'   => '255',        'value'       => set_value('prenom', $user['prenom']),		'style'		  => 'text-transform: capitalize',    ),	'date_naissance' => array(		'type'		  => 'date',        'name'        => 'date_naissance',        'id'          => 'date_naissance',        'maxlength'   => '10',        'class'       => 'input-small',        'value'       => set_value('date_naissance', $user['date_naissance']),    ),	'adresse' => array(        'name'        => 'adresse',        'id'          => 'adresse',        'maxlength'   => '255',        'class'       => 'span5',        'required'    => 'required',        'value'       => set_value('adresse', $user['adresse']),    ),	'adresse2' => array(        'name'        => 'adresse2',        'id'          => 'adresse2',        'maxlength'   => '255',        'class'       => 'span5',        'value'       => set_value('adresse2', $user['adresse2']),    ),	'cp' => array(        'name'        => 'cp',        'id'          => 'cp',        'maxlength'   => '5',        'class'       => 'input-small',        'required'    => 'required',        'value'       => set_value('cp', $user['cp']),    ),	'ville' => array(        'name'        => 'ville',        'id'          => 'ville',        'maxlength'   => '255',        'required'    => 'required',        'value'       => set_value('ville', $user['ville']),		'style'		  => 'text-transform: capitalize',    ),	'pays' => array(				'name'        => 'pays',        'id'          => 'pays',		'options'	  => $tab_pays,        'defaults'    => $user['pays'],		'add'		  => 'id="pays" width="400px" data-placeholder="'.$this->lang->line('users_placeholder_pays').'" class="span5 chosen" ',    ),	'tel' => array(		'type'        => 'tel',        'name'        => 'tel',        'id'          => 'tel',        'maxlength'   => '15',        'class'       => 'input-small',        'required'    => 'required',        'value'       => set_value('tel', $user['tel']),    ),	'tel2' => array(		'type'        => 'tel',        'name'        => 'tel2',        'id'          => 'tel2',        'maxlength'   => '15',        'class'       => 'input-small',        'value'       => set_value('tel2', $user['tel2']),    ),	'email' => array(        'name'        => 'email',        'id'          => 'email',		'type'		  => 'email',        'maxlength'   => '255',        'required'    => 'required',        'value'       => set_value('email', $user['email']),    ),);echo form_open($action, array('id' => 'form_user', 'name' => 'form_user', 'class' => 'form-horizontal well'));	echo form_hidden('user_id', $id);		// Informations générales	echo '<fieldset><legend><h3>'.$this->lang->line('users_fieldset_general').'</h3></legend>';		echo '<div class="control-group">';			echo '<div class="controls">';				echo '<div class="btn-group" data-toggle="buttons-radio">';					$ext = ($data['actif']['value'] == 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'actif\', 1)" >'.$this->lang->line('users_libelle_actif').'</button>';					$ext = ($data['actif']['value'] != 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'actif\', 0)" >'.$this->lang->line('users_libelle_inactif').'</button>';				echo '</div>';				echo form_hidden($data['actif']['name'], $data['actif']['value']);			echo '</div>';		echo '</div>';		echo '<div class="control-group">';			echo '<div class="controls">';				echo '<div class="btn-group" data-toggle="buttons-radio">';					$ext = ($data['statut']['value'] == 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'statut\', 1)" >'.$this->lang->line('users_libelle_statut_'.$tab_statut[1]).'</button>';					$ext = ($data['statut']['value'] != 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'statut\', 2)" >'.$this->lang->line('users_libelle_statut_'.$tab_statut[2]).'</button>';				echo '</div>';				echo form_hidden($data['statut']['name'], $data['statut']['value']);			echo '</div>';		echo '</div>';			// Utilisation de display_input form1 : cf My_form_helper		echo display_input_form1($this->lang->line('users_libelle_login'), $data['login'], form_error('login'));		echo display_input_form1($this->lang->line('users_libelle_password'), $data['password'], form_error('password'));	echo '</fieldset>';			// Identité	echo '<fieldset><legend><h3>'.$this->lang->line('users_fieldset_identite').'</h3></legend>';		echo '<div class="control-group">';			echo '<div class="controls">';				echo '<div class="btn-group" data-toggle="buttons-radio">';					$ext = ($data['civ']['value'] == 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'civ\', 1)" >'.$this->lang->line('users_libelle_civ_1').'</button>';					$ext = ($data['civ']['value'] == 2) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'civ\', 2)" >'.$this->lang->line('users_libelle_civ_2').'</button>';					$ext = ($data['civ']['value'] == 3) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'civ\', 3)" >'.$this->lang->line('users_libelle_civ_3').'</button>';				echo '</div>';				echo form_hidden($data['civ']['name'], $data['civ']['value']);			echo '</div>';		echo '</div>';			echo display_input_form1($this->lang->line('users_libelle_nom'), $data['nom'], form_error('nom'));		echo display_input_form1($this->lang->line('users_libelle_prenom'), $data['prenom'], form_error('prenom'));		echo display_input_form1($this->lang->line('users_libelle_date_naissance'), $data['date_naissance'], form_error('date_naissance'));	echo '</fieldset>';		// Localisation	echo '<fieldset><legend><h3>'.$this->lang->line('users_fieldset_localisation').'</h3></legend>';		echo display_input_form1($this->lang->line('users_libelle_adresse'), $data['adresse'], form_error('adresse'));		echo display_input_form1($this->lang->line('users_libelle_adresse2'), $data['adresse2'], form_error('adresse2'));		echo display_input_form1($this->lang->line('users_libelle_cp'), $data['cp'], form_error('cp'));		echo display_input_form1($this->lang->line('users_libelle_ville'), $data['ville'], form_error('ville'));		echo '<div class="control-group">';			echo form_label($this->lang->line('users_libelle_pays'), $data['pays']['id'], array('class' => 'control-label'));			echo '<div class="controls">';				echo form_dropdown($data['pays']['name'], $data['pays']['options'], $data['pays']['defaults'], $data['pays']['add']);			echo '</div>';		echo '</div>';	echo '</fieldset>';		// Contact	echo '<fieldset><legend><h3>'.$this->lang->line('users_fieldset_contact').'</h3></legend>';		echo display_input_form1($this->lang->line('users_libelle_tel'), $data['tel'], form_error('tel'));		echo display_input_form1($this->lang->line('users_libelle_tel2'), $data['tel2'], form_error('tel2'));		echo display_input_form1($this->lang->line('users_libelle_email'), $data['email'], form_error('email'));	echo '</fieldset>';	echo '<div class="form-actions">';		echo form_submit(array('name' => 'submit_user', 'class' => 'btn btn-primary'), $this->lang->line('general_valider'));		echo ' <button type="button" class="btn" onclick="window.location.href=\''.site_url('/users/liste').'\'" >'.$this->lang->line('general_retour').'</button>';	echo '</div>';echo '</form>';