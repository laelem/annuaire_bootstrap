<?php$id = !empty($contact['contact_id']) ? $contact['contact_id'] : '';$action = empty($id) ? 'annuaire/ajouter' : 'annuaire/modifier/'.$id;$size_input = 60;$data = array(    'actif_oui' => array('name' => 'actif', 'id' => 'actif_oui', 'value' => 1, 'checked' => set_radio('actif', 1, ($contact['actif']==1))),    'actif_non' => array('name' => 'actif', 'id' => 'actif_non', 'value' => 0, 'checked' => set_radio('actif', 0, ($contact['actif']!=1))),	'civ_1' => array('name' => 'civ', 'id' => 'civ_1', 'value' => 1, 'checked' => set_radio('civ', 1, ($contact['civ']==1))),	'civ_2' => array('name' => 'civ', 'id' => 'civ_2', 'value' => 2, 'checked' => set_radio('civ', 2, ($contact['civ']==2))),	'civ_3' => array('name' => 'civ', 'id' => 'civ_3', 'value' => 3, 'checked' => set_radio('civ', 3, ($contact['civ']==3))),	'nom' => array(        'name'        => 'nom',        'id'          => 'nom',        'maxlength'   => '255',        'size'        => $size_input,        'required'    => 'required',        'value'       => set_value('nom', $contact['nom']),		'style'		  => 'text-transform: uppercase',    ),	'prenom' => array(        'name'        => 'prenom',        'id'          => 'prenom',        'maxlength'   => '255',        'size'        => $size_input,		'required'    => 'required',        'value'       => set_value('prenom', $contact['prenom']),		'style'		  => 'text-transform: capitalize',    ),	'tel' => array(		'type'        => 'tel',        'name'        => 'tel',        'id'          => 'tel',        'maxlength'   => '15',        'size'        => '15',        'value'       => set_value('tel', $contact['tel']),    ),	'mobile' => array(		'type'        => 'tel',        'name'        => 'mobile',        'id'          => 'mobile',        'maxlength'   => '15',        'size'        => '15',        'value'       => set_value('mobile', $contact['mobile']),    ),	'fax' => array(		'type'        => 'tel',        'name'        => 'fax',        'id'          => 'fax',        'maxlength'   => '15',        'size'        => '15',        'value'       => set_value('fax', $contact['fax']),    ),	'decideur_oui' => array('name' => 'decideur', 'id' => 'decideur_oui', 'value' => 1, 'checked' => set_radio('decideur', 1, ($contact['decideur']==1))),    'decideur_non' => array('name' => 'decideur', 'id' => 'decideur_non', 'value' => 0, 'checked' => set_radio('decideur', 0, ($contact['decideur']!=1))),	'societe' => array(        'name'        => 'societe',        'id'          => 'societe',        'maxlength'   => '255',        'size'        => $size_input,		'required'    => 'required',        'value'       => set_value('societe', $contact['societe']),		'style'		  => 'text-transform: uppercase',    ),	'fonctions' => array(        'name'        => 'fonctions[]',        'id'          => 'fonctions',		'options'	  => $fonctions,        'defaults'    => $contact['fonctions'],		'add'		  => 'id="fonctions" width="400px" data-placeholder="'.$this->lang->line('annuaire_placeholder_fonctions').'" required="required"',    ),	'adresse' => array(        'name'        => 'adresse',        'id'          => 'adresse',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('adresse', $contact['adresse']),    ),	'adresse2' => array(        'name'        => 'adresse2',        'id'          => 'adresse2',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('adresse2', $contact['adresse2']),    ),	'cp' => array(        'name'        => 'cp',        'id'          => 'cp',        'maxlength'   => '5',        'size'        => '5',        'value'       => set_value('cp', $contact['cp']),    ),	'ville' => array(        'name'        => 'ville',        'id'          => 'ville',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('ville', $contact['ville']),		'style'		  => 'text-transform: capitalize',    ),	'pays' => array(				'name'        => 'pays',        'id'          => 'pays',		'options'	  => $tab_pays,        'defaults'    => $contact['pays'],		'add'		  => 'id="pays" width="400px" data-placeholder="'.$this->lang->line('annuaire_placeholder_pays').'" ',    ),	'web' => array(		'type'        => 'url',        'name'        => 'web',        'id'          => 'web',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('web', $contact['web']),    ),	'email' => array(        'name'        => 'email',        'id'          => 'email',		'type'		  => 'email',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('email', $contact['email']),    ),	'photo' => array(        'name'        => 'photo',        'id'          => 'photo',		'accept'      => 'image/*',    ),	'com' => array(        'name'        => 'com',        'id'          => 'com',        'cols'   	  => '40',        'rows'        => '5',        'value'       => set_value('com', $contact['com']),    ),);$liste_erreurs = validation_errors().$erreur_upload_photo;if(!empty($liste_erreurs)){	echo '<div class="erreurs_form">';		echo '<p>'.$this->lang->line('global_erreur_form').'</p>';		echo '<div>';			echo $liste_erreurs;		echo '</div>';	echo '</div>';}echo form_open_multipart($action, array('id' => 'form_contact', 'name' => 'form_contact'));	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_actif').' <span class="requis">*</span>'),		form_label(form_radio($data['actif_oui']).' '.$this->lang->line('general_oui'), $data['actif_oui']['id'], array('class' => 'label_radio'))		.form_label(form_radio($data['actif_non']).' '.$this->lang->line('general_non'), $data['actif_non']['id'], array('class' => 'label_radio'))	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_civ')),		form_label(form_radio($data['civ_1']).' '.$this->lang->line('annuaire_libelle_civ_1'), $data['civ_1']['id'], array('class' => 'label_radio'))		.form_label(form_radio($data['civ_2']).' '.$this->lang->line('annuaire_libelle_civ_2'), $data['civ_2']['id'], array('class' => 'label_radio'))		.form_label(form_radio($data['civ_3']).' '.$this->lang->line('annuaire_libelle_civ_3'), $data['civ_3']['id'], array('class' => 'label_radio'))	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_nom').' <span class="requis">*</span>', $data['nom']['id']),		form_input($data['nom'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_prenom').' <span class="requis">*</span>', $data['prenom']['id']),		form_input($data['prenom'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_tel'), $data['tel']['id']),		form_input($data['tel'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_mobile'), $data['mobile']['id']),		form_input($data['mobile'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_fax'), $data['fax']['id']),		form_input($data['fax'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_decideur')),		form_label(form_radio($data['decideur_oui']).' '.$this->lang->line('general_oui'), $data['decideur_oui']['id'], array('class' => 'label_radio'))		.form_label(form_radio($data['decideur_non']).' '.$this->lang->line('general_non'), $data['decideur_non']['id'], array('class' => 'label_radio'))	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_societe').' <span class="requis">*</span>', $data['societe']['id']),		form_input($data['societe'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_fonctions').' <span class="requis">*</span>', $data['fonctions']['id']),		form_multiselect($data['fonctions']['name'], $data['fonctions']['options'], $data['fonctions']['defaults'], $data['fonctions']['add'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_adresse'), $data['adresse']['id']),		form_input($data['adresse'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_adresse2'), $data['adresse2']['id']),		form_input($data['adresse2'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_cp'), $data['cp']['id']),		form_input($data['cp'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_ville'), $data['ville']['id']),		form_input($data['ville'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_pays'), $data['pays']['id']),		form_dropdown($data['pays']['name'], $data['pays']['options'], $data['pays']['defaults'], $data['pays']['add'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_email'), $data['email']['id']),		form_input($data['email'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_web'), $data['web']['id']),		form_input($data['web'])	);		$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_photo'), $data['photo']['id']),		$lien_photo		.$btn_suppr_photo		.form_upload($data['photo'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_com'), $data['com']['id']),		form_textarea($data['com'])	);	$sess_annuaire = $this->session->userdata('annuaire');	$this->table->add_row(		'',		form_submit('submit_contact', $this->lang->line('general_valider'))		.'<button type="button" onclick="window.location.href=\''.site_url('/annuaire/liste/'.$sess_annuaire['page']).'\'" >'.$this->lang->line('general_retour').'</button>'	);	echo $this->table->generate();echo '</form>';echo '<p>'.sprintf($this->lang->line('general_champs_requis'), '<span class="requis">*</span>').'</p>';