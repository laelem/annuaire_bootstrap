<?php$id = !empty($contact['contact_id']) ? $contact['contact_id'] : '';$action = empty($id) ? 'annuaire/ajouter' : 'annuaire/modifier/'.$id;$data = array(    'actif' => array(		'name'		  => 'actif',		'value'       => set_value('actif', $contact['actif']),    ),	'decideur' => array(		'name'		  => 'decideur',		'value'       => set_value('decideur', $contact['decideur']),    ),	'civ' => array(		'name'		  => 'civ',		'value'       => set_value('civ', $contact['civ']),    ),	'nom' => array(        'name'        => 'nom',        'id'          => 'nom',        'maxlength'   => '255',        'required'    => 'required',        'value'       => set_value('nom', $contact['nom']),		'style'		  => 'text-transform: uppercase',    ),	'prenom' => array(        'name'        => 'prenom',        'id'          => 'prenom',        'maxlength'   => '255',		'required'    => 'required',        'value'       => set_value('prenom', $contact['prenom']),		'style'		  => 'text-transform: capitalize',    ),	'tel' => array(		'type'        => 'tel',        'name'        => 'tel',        'id'          => 'tel',        'maxlength'   => '15',        'class'        => 'input-small',        'value'       => set_value('tel', $contact['tel']),    ),	'mobile' => array(		'type'        => 'tel',        'name'        => 'mobile',        'id'          => 'mobile',        'maxlength'   => '15',        'class'        => 'input-small',        'value'       => set_value('mobile', $contact['mobile']),    ),	'fax' => array(		'type'        => 'tel',        'name'        => 'fax',        'id'          => 'fax',        'maxlength'   => '15',        'class'        => 'input-small',        'value'       => set_value('fax', $contact['fax']),    ),	'societe' => array(        'name'        => 'societe',        'id'          => 'societe',        'maxlength'   => '255',		'required'    => 'required',        'value'       => set_value('societe', $contact['societe']),		'style'		  => 'text-transform: uppercase',    ),	'fonctions' => array(        'name'        => 'fonctions[]',        'id'          => 'fonctions',		'options'	  => $fonctions,        'defaults'    => $contact['fonctions'],		'add'		  => 'id="fonctions" width="400px" data-placeholder="'.$this->lang->line('annuaire_placeholder_fonctions').'" required="required"',		'required'    => 'required',    ),	'adresse' => array(        'name'        => 'adresse',        'id'          => 'adresse',        'maxlength'   => '255',        'class'       => 'span5',        'value'       => set_value('adresse', $contact['adresse']),    ),	'adresse2' => array(        'name'        => 'adresse2',        'id'          => 'adresse2',        'maxlength'   => '255',        'class'       => 'span5',        'value'       => set_value('adresse2', $contact['adresse2']),    ),	'cp' => array(        'name'        => 'cp',        'id'          => 'cp',        'maxlength'   => '5',        'class'        => 'input-small',        'value'       => set_value('cp', $contact['cp']),    ),	'ville' => array(        'name'        => 'ville',        'id'          => 'ville',        'maxlength'   => '255',        'value'       => set_value('ville', $contact['ville']),		'style'		  => 'text-transform: capitalize',    ),	'pays' => array(				'name'        => 'pays',        'id'          => 'pays',		'options'	  => $tab_pays,        'defaults'    => $contact['pays'],		'add'		  => 'id="pays" width="400px" data-placeholder="'.$this->lang->line('annuaire_placeholder_pays').'" class="span5 chosen" ',    ),	'web' => array(		'type'        => 'url',        'name'        => 'web',        'id'          => 'web',        'maxlength'   => '255',        'value'       => set_value('web', $contact['web']),    ),	'email' => array(        'name'        => 'email',        'id'          => 'email',		'type'		  => 'email',        'maxlength'   => '255',        'value'       => set_value('email', $contact['email']),    ),	'photo' => array(        'name'        => 'photo',        'id'          => 'photo',		'accept'      => 'image/*',		'class'		  => 'input-file'    ),	'com' => array(        'name'        => 'com',        'id'          => 'com',        'value'       => set_value('com', $contact['com']),		'class'		  => 'span5',		'rows'		  => '3',    ),);echo form_open_multipart($action, array('id' => 'form_contact', 'name' => 'form_contact', 'class' => 'form-horizontal well'));		// Informations générales	echo '<fieldset><legend><h3>'.$this->lang->line('annuaire_fieldset_general').'</h3></legend>';		echo '<div class="control-group">';			echo '<div class="controls">';				echo '<div class="btn-group" data-toggle="buttons-radio">';					$ext = ($data['actif']['value'] == 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'actif\', 1)" >'.$this->lang->line('annuaire_libelle_actif').'</button>';					$ext = ($data['actif']['value'] != 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'actif\', 0)" >'.$this->lang->line('annuaire_libelle_inactif').'</button>';				echo '</div>';				echo form_hidden($data['actif']['name'], $data['actif']['value']);			echo '</div>';		echo '</div>';		echo '<div class="control-group">';			echo '<div class="controls">';				echo '<div class="btn-group" data-toggle="buttons-radio">';					$ext = ($data['civ']['value'] == 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'civ\', 1)" >'.$this->lang->line('annuaire_libelle_civ_1').'</button>';					$ext = ($data['civ']['value'] == 2) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'civ\', 2)" >'.$this->lang->line('annuaire_libelle_civ_2').'</button>';					$ext = ($data['civ']['value'] == 3) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'civ\', 3)" >'.$this->lang->line('annuaire_libelle_civ_3').'</button>';				echo '</div>';				echo form_hidden($data['civ']['name'], $data['civ']['value']);			echo '</div>';		echo '</div>';				// Utilisation de display_input form1 : cf My_form_helper		echo display_input_form1($this->lang->line('annuaire_libelle_nom'), $data['nom'], form_error('nom'));		echo display_input_form1($this->lang->line('annuaire_libelle_prenom'), $data['prenom'], form_error('prenom'));	echo '</fieldset>';		// Emploi	echo '<fieldset><legend><h3>'.$this->lang->line('annuaire_fieldset_emploi').'</h3></legend>';		echo '<div class="control-group">';			echo '<div class="controls">';				echo '<div class="btn-group" data-toggle="buttons-radio">';					$ext = ($data['decideur']['value'] == 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'decideur\', 1)" >'.$this->lang->line('annuaire_libelle_decideur').'</button>';					$ext = ($data['decideur']['value'] != 1) ? ' active' : '';					echo '<button class="btn'.$ext.'" type="button" onclick="toggle_radio(\'decideur\', 0)" >'.$this->lang->line('annuaire_libelle_non_decideur').'</button>';				echo '</div>';				echo form_hidden($data['decideur']['name'], $data['decideur']['value']);			echo '</div>';		echo '</div>';		echo display_input_form1($this->lang->line('annuaire_libelle_societe'), $data['societe'], form_error('societe'));		echo '<div class="control-group">';			echo form_label($this->lang->line('annuaire_libelle_fonctions'), $data['fonctions']['id'], array('class' => 'control-label'));			echo '<div class="controls">';				echo form_dropdown($data['fonctions']['name'], $data['fonctions']['options'], $data['fonctions']['defaults'], $data['fonctions']['add']);				if(form_error('fonctions[]'))					echo form_error('fonctions[]');				elseif(!empty($data['fonctions']['required']))					echo ' <span class="requis">(requis)</span>';			echo '</div>';		echo '</div>';	echo '</fieldset>';		// Localisation	echo '<fieldset><legend><h3>'.$this->lang->line('annuaire_fieldset_localisation').'</h3></legend>';		echo display_input_form1($this->lang->line('annuaire_libelle_adresse'), $data['adresse'], form_error('adresse'));		echo display_input_form1($this->lang->line('annuaire_libelle_adresse2'), $data['adresse2'], form_error('adresse2'));		echo display_input_form1($this->lang->line('annuaire_libelle_cp'), $data['cp'], form_error('cp'));		echo display_input_form1($this->lang->line('annuaire_libelle_ville'), $data['ville'], form_error('ville'));		echo '<div class="control-group">';			echo form_label($this->lang->line('annuaire_libelle_pays'), $data['pays']['id'], array('class' => 'control-label'));			echo '<div class="controls">';				echo form_dropdown($data['pays']['name'], $data['pays']['options'], $data['pays']['defaults'], $data['pays']['add']);			echo '</div>';		echo '</div>';	echo '</fieldset>';		// Contact	echo '<fieldset><legend><h3>'.$this->lang->line('annuaire_fieldset_contact').'</h3></legend>';		echo display_input_form1($this->lang->line('annuaire_libelle_tel'), $data['tel'], form_error('tel'));		echo display_input_form1($this->lang->line('annuaire_libelle_mobile'), $data['mobile'], form_error('mobile'));		echo display_input_form1($this->lang->line('annuaire_libelle_fax'), $data['fax'], form_error('fax'));		echo display_input_form1($this->lang->line('annuaire_libelle_email'), $data['email'], form_error('email'));	echo '</fieldset>';		// Extra	echo '<fieldset><legend><h3>'.$this->lang->line('annuaire_fieldset_extra').'</h3></legend>';		echo display_input_form1($this->lang->line('annuaire_libelle_web'), $data['web'], form_error('web'));		if($erreur_upload_photo)			echo '<div class="control-group error">';		else			echo '<div class="control-group">';			echo form_label($this->lang->line('annuaire_libelle_photo'), $data['photo']['id'], array('class' => 'control-label'));			echo '<div class="controls">';				echo $lien_photo.$btn_suppr_photo.form_upload($data['photo']);				if($erreur_upload_photo)					echo '<div class="error">'.$erreur_upload_photo.'</div>';			echo '</div>';		echo '</div>';				echo '<div class="control-group">';			echo form_label($this->lang->line('annuaire_libelle_com'), $data['com']['id'], array('class' => 'control-label'));			echo '<div class="controls">';				echo form_textarea($data['com']);			echo '</div>';		echo '</div>';	echo '</fieldset>';	$sess_annuaire = $this->session->userdata('annuaire');	echo '<div class="form-actions">';		echo form_submit(array('name' => 'submit_contact', 'class' => 'btn btn-primary'), $this->lang->line('general_valider'));		echo ' <button type="button" class="btn" onclick="window.location.href=\''.site_url('/annuaire/liste/'.$sess_annuaire['page']).'\'" >'.$this->lang->line('general_retour').'</button>';	echo '</div>';echo '</form>';