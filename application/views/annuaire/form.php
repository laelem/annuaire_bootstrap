<?php$id = !empty($contact['contact_id']) ? $contact['contact_id'] : '';$action = empty($id) ? 'annuaire/ajouter' : 'annuaire/modifier/'.$id;$size_input = 60;$data = array(    'actif_oui' => array('name' => 'actif', 'value' => 1, 'checked' => set_radio('actif', 1, ($contact['actif']==1))),    'actif_non' => array('name' => 'actif', 'value' => 0, 'checked' => set_radio('actif', 0, ($contact['actif']!=1))),	'civ_1' => array('name' => 'civ', 'value' => 1, 'checked' => set_radio('civ', 1, ($contact['civ']==1))),	'civ_2' => array('name' => 'civ', 'value' => 2, 'checked' => set_radio('civ', 2, ($contact['civ']==2))),	'civ_3' => array('name' => 'civ', 'value' => 3, 'checked' => set_radio('civ', 3, ($contact['civ']==3))),	'nom' => array(        'name'        => 'nom',        'maxlength'   => '255',        'size'        => $size_input,        'required'    => 'required',        'value'       => set_value('nom', $contact['nom']),		'style'		  => 'text-transform: uppercase',    ),	'prenom' => array(        'name'        => 'prenom',        'maxlength'   => '255',        'size'        => $size_input,		'required'    => 'required',        'value'       => set_value('prenom', $contact['prenom']),		'style'		  => 'text-transform: capitalize',    ),	'tel' => array(        'name'        => 'tel',        'maxlength'   => '15',        'size'        => '15',        'value'       => set_value('tel', $contact['tel']),    ),	'mobile' => array(        'name'        => 'mobile',        'maxlength'   => '15',        'size'        => '15',        'value'       => set_value('mobile', $contact['mobile']),    ),	'fax' => array(        'name'        => 'fax',        'maxlength'   => '15',        'size'        => '15',        'value'       => set_value('fax', $contact['fax']),    ),	'decideur_oui' => array('name' => 'decideur', 'value' => 1, 'checked' => set_radio('decideur', 1, ($contact['decideur']==1))),    'decideur_non' => array('name' => 'decideur', 'value' => 0, 'checked' => set_radio('decideur', 0, ($contact['decideur']!=1))),	'societe' => array(        'name'        => 'societe',        'maxlength'   => '255',        'size'        => $size_input,		'required'    => 'required',        'value'       => set_value('societe', $contact['societe']),		'style'		  => 'text-transform: uppercase',    ),	'fonctions' => array(        'name'        => 'fonctions[]',		'options'	  => $fonctions,        'defaults'    => $contact['fonctions'],    ),	'adresse' => array(        'name'        => 'adresse',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('adresse', $contact['adresse']),    ),	'adresse2' => array(        'name'        => 'adresse2',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('adresse2', $contact['adresse2']),    ),	'cp' => array(        'name'        => 'cp',        'maxlength'   => '5',        'size'        => '5',        'value'       => set_value('cp', $contact['cp']),    ),	'ville' => array(        'name'        => 'ville',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('ville', $contact['ville']),		'style'		  => 'text-transform: capitalize',    ),	'pays' => array(        'name'        => 'pays',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('pays', $contact['pays']),		'style'		  => 'text-transform: uppercase',    ),	'web' => array(        'name'        => 'web',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('web', $contact['web']),    ),	'email' => array(        'name'        => 'email',		'type'		  => 'email',        'maxlength'   => '255',        'size'        => $size_input,        'value'       => set_value('email', $contact['email']),    ),	'photo' => array(        'name'        => 'photo',    ),	'com' => array(        'name'        => 'com',        'cols'   	  => '40',        'rows'        => '5',        'value'       => set_value('com', $contact['com']),    ),);$liste_erreurs = validation_errors().$erreur_upload_photo;if(!empty($liste_erreurs)){	echo '<div class="erreurs_form">';		echo '<p>'.$this->lang->line('global_erreur_form').'</p>';		echo '<div>';			echo $liste_erreurs;		echo '</div>';	echo '</div>';}echo form_open_multipart($action, array('id' => 'form_contact', 'name' => 'form_contact'));	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_actif').' <span class="requis">*</span>', 'actif'),		form_radio($data['actif_oui']).' '.$this->lang->line('general_oui').' '		.form_radio($data['actif_non']).' '.$this->lang->line('general_non').' '	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_civ'), 'civ'),		form_radio($data['civ_1']).' '.$this->lang->line('annuaire_libelle_civ_1').' '		.form_radio($data['civ_2']).' '.$this->lang->line('annuaire_libelle_civ_2').' '		.form_radio($data['civ_3']).' '.$this->lang->line('annuaire_libelle_civ_3').' '	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_nom').' <span class="requis">*</span>', 'nom'),		form_input($data['nom'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_prenom').' <span class="requis">*</span>', 'prenom'),		form_input($data['prenom'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_tel'), 'tel'),		form_input($data['tel'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_mobile'), 'mobile'),		form_input($data['mobile'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_fax'), 'fax'),		form_input($data['fax'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_decideur'), 'decideur'),		form_radio($data['decideur_oui']).' '.$this->lang->line('general_oui').' '		.form_radio($data['decideur_non']).' '.$this->lang->line('general_non').' '	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_societe').' <span class="requis">*</span>', 'societe'),		form_input($data['societe'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_fonctions').' <span class="requis">*</span>', 'fonctions'),		form_multiselect($data['fonctions']['name'], $data['fonctions']['options'], $data['fonctions']['defaults'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_adresse'), 'adresse'),		form_input($data['adresse'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_adresse2'), 'adresse2'),		form_input($data['adresse2'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_cp'), 'cp'),		form_input($data['cp'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_ville'), 'ville'),		form_input($data['ville'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_pays'), 'pays'),		form_input($data['pays'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_email'), 'email'),		form_input($data['email'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_web'), 'web'),		form_input($data['web'])	);		$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_photo'), 'photo'),		$lien_photo		.$btn_suppr_photo		.form_upload($data['photo'])	);	$this->table->add_row(		form_label($this->lang->line('annuaire_libelle_com'), 'com'),		form_textarea($data['com'])	);	$sess_annuaire = $this->session->userdata('annuaire');	$this->table->add_row(		'',		form_submit('submit_contact', $this->lang->line('general_valider'))		.'<button type="button" onclick="window.location.href=\''.site_url('/annuaire/liste/'.$sess_annuaire['page']).'\'" >'.$this->lang->line('general_retour').'</button>'	);	echo $this->table->generate();echo '</form>';echo '<p>'.sprintf($this->lang->line('general_champs_requis'), '<span class="requis">*</span>').'</p>';